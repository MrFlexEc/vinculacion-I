<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro</title>
     <!-- LIBRERIAS Y SCRIPT QUE SERAN USADOS PARA COMBO BOX Y POST --> 
     <link rel="icon" type="image/x-icon" href="https://i.ibb.co/Ytrg4r9/Monograma-Logotipo-belleza-blanco-y-negro.png" >

     <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script> 
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
<script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <style>
        a {
            text-decoration: none;
        }
    </style>
    
</head>
<body style="background-color: #C2D7DB; display: flex; flex-direction: column; min-height: 100vh;">
         
    <% if (login){ %> 
        <nav class="navbar sticky-top " style="background-color:#385277 ;color: #a3c1d5;" >  
            <div class="container-fluid ">
                <div class="navbar-toggler-icon  z-1"><div class="px-5 z3">AGREGAR_REGISTRO</div> </div> <!--icono-->
                    <img src="https://i.ibb.co/YBVfJJ8/Monograma-Logotipo-belleza-blanco-y-negro-removebg-preview.png" style=" margin-top: 77px;margin-left: 77%; ; max-width: 11rem; position: absolute;">
                    <div class="d-flex justify-content-end "> 
                        <input class="text-center" type="date" id="fecha" name="fecha" value="" readonly>
                    </div>
                </div>
                

            </div>
            
            <script>
                // Obtener la fecha actual
                var fechaActual = new Date();
                
                // Formatear la fecha para el valor del input
                var dd = String(fechaActual.getDate()).padStart(2, '0');
                var mm = String(fechaActual.getMonth() + 1).padStart(2, '0');
                var yyyy = fechaActual.getFullYear();
                var fechaFormateada = yyyy + '-' + mm + '-' + dd;
                
                // Asignar la fecha formateada al valor del input
                document.getElementById("fecha").value = fechaFormateada;
              </script>
 
          </div>
            
            <div class="d-flex justify-content-around" style="background-color: #385277;">
              <!--NAVEGACION -->
              <div class="p-3">
                <li class="list-unstyled nav-item dropdown">
                  <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    Observar
                  </a>
                  <ul class="dropdown-menu  "> 
                    <li> <a class="dropdown-item" href="VerRegistros">Registros</a></li>
                    <li> <a class="dropdown-item" href="Ver-Proveedor">Proveedor</a></li>
                  </ul>
                </li>
                </div>
              <div class="p-3"> <a href="inventario" style="text-decoration: none; color: #a3c1d5;">Inventario</a></div>
              <div class="p-3"> <a href="crearRegistro" style="text-decoration: none; color: #a3c1d5;">Registrar</a></div>
              <div class="p-3"> <a href="crearProveedor" style="text-decoration: none; color: #a3c1d5;">Proveedor</a></div>
              <div class="p-3"> <a href="crearUsuario" style="text-decoration: none; color: #a3c1d5;">Usuario</a></div>
              <div class="p-3">
                  <li class="list-unstyled nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                      Historial
                    </a>
                    <ul class="dropdown-menu  "> 
                      <li> <a class="dropdown-item" href="Historial-Egreso">Egreso Historial</a></li>
                      <li> <a class="dropdown-item" href="Historial-Ingreso">Ingreso Historial</a></li>
                    </ul>
                  </li>
              </div>
             
            
            </div>
            <div class="px-4">
                  <div class="d-flex justify-content-end px-4"> 
                    
                  </div>
            </div>
        </nav>
          
    <!-- Aqui ya te la sabes  

   <nav class="navbar sticky-top" style="background-color:#385277 ;color: #a3c1d5;" >  
        <div class="container-fluid">
            <div class="p-2 d-flex justify-content-start"> AGREGAR REGISTRO </div>
            <div class="d-flex justify-content-end"> 
                <input class="text-center" type="date" id="fecha" name="fecha" value="" readonly>
            </div>

            <script>
                // Obtener la fecha actual
                var fechaActual = new Date();
                
                // Formatear la fecha para el valor del input
                var dd = String(fechaActual.getDate()).padStart(2, '0');
                var mm = String(fechaActual.getMonth() + 1).padStart(2, '0');
                var yyyy = fechaActual.getFullYear();
                var fechaFormateada = yyyy + '-' + mm + '-' + dd;
                
                // Asignar la fecha formateada al valor del input
                document.getElementById("fecha").value = fechaFormateada;
              </script>
        </div>
    </nav>
-->
    
    <form action="/insertarRegistro" method="POST">
         <!-- Estructura  --> 
    <div class="container ">
        <div class="row ">
            <div class="col-10 p-2">
                <div class="col-sm-6 col-md-12 col-lg-12 col-xl-12 ">
                    <div class="container ">
                        <div class="row">
                            <div class="col-sm-12 col-md-5 col-lg-5 col-xl-5  ">
                                <div class="justify-content-start fs-4 " style="color: #385277; ">
                                    <!-- inputs--> 
                                    Código
                                        <div class="opacity-75">
                                            <input required type="text" name="codigoRegistro" class="form-control rounded-4 border-2" style="background-color: #99B3D8; color: black; border-color: #385277;">
                                        </div>

                                        Nombre
                                        <div class="opacity-75">
                                            <input required type="text" name="nombreRegistro" class="form-control rounded-4 border-2" style="background-color: #99B3D8; color: black; border-color: #385277;">
                                        </div>

                                        Descripción
                                        <div class="opacity-75">
                                            <input required type="text" name="descripcionRegistro" class="form-control rounded-4 border-2" style="background-color: #99B3D8; color: black; border-color: #385277;">
                                        </div>
                                </div>
        
                            </div>
                             <!-- combobox con scripts para ser usado luego. viene con buscador--> 
                            <div class="col-sm-6 col-md-5 col-lg-5 col-xl-5 ">
                                <div class="justify-content-start  fs-5 " style="color: #385277;  "> 
                                        Marca  
                                    <div class="btn-group form-control " style="border:none ;background-color: #C2D7DB;">
                                        <select required id="miSelect" name="marcaRegistro" class=" btn ">
                                            <option  disabled selected>Seleccione..</option>
                                            <% Marca?.forEach((marca) =>{ %>  
                                                <% id_marca= marca.IDMARCA %>
                                                <% nombre_marca= marca.NOMBREMARCA %>  
                                            <option value="<%= id_marca %>"  style="color: #707070;"><%= nombre_marca %></option>
                                            <% }); %>   


                                        </select>
                                       
                                    </div>
                                    <style>
                                        /* Aqui se cambia el fondo de el cuadro de busqueda donde se escribe y el color del texto*/
                                        .select2-container .select2-search input {
                                        background-color: #99B3D8;
                                        color: black;

                                        
                                    }
                                        /* Aqui se cambia el fondo de el cuadro antes de desplegarse y el color de texto de este*/
                                        .select2-selection__rendered {
                                        background-color: #99B3D8;
                                        padding-top: 8px;
                                        border-radius: 5px;
                                        text-align: center;
                                        /* Color y tamaño del borde del combo box*/
                                        border: 2px solid #385277;

                                    }

                                    /* Se cambia el color del texto en las opciones desplegadas y el color de fondo de este*/
                                    .select2-results__option {
                                         color: black;
                                         background-color: #99B3D8;
                                        }   
     


                                    </style>

                                     <!-- combo box categoria--> 
                                    <div class="py-1" style="position: relative; bottom: 4px; ">Categoría</div>  
                                    <div class="btn-group form-control " style=" background-color: #C2D7DB; border:none ; position: relative; bottom: 7px; ">
                                        <select required id="miSelect2"  name="categoriaRegistro" class=" btn">
                                            <option disabled selected>Seleccione..</option>
                                            
                                            <% Categoria?.forEach((categoria) =>{ %>  
                                                <% id_categoria= categoria.IDCATEGORIA %>
                                                <% nombre_categoria= categoria.NOMBRECATEGORIA %>  
                                            <option value="<%= id_categoria %>" style="color: #707070;"><%= nombre_categoria %></option>
                                            <% }); %> 


                                        </select>
                                       
                                    </div>

                                    <!-- combo box proveedor--> 
                                    
                                </div>       
                            </div>

                             <!-- combo box medida--> 
                            <div class="col-sm-8 col-md-2 col-lg-2 col-xl-2 p-2 ">
                                <div class="justify-content-start  fs-5" style="color: #385277;"> 
                                        Medida  
                                        <select required  name="medidaRegistro" class=" btn border-2   dropdown-toggle dropdown-toggle-split" data-bs-toggle="dropdown" aria-expanded="false" style="background-color: #99B3D8; color: #514848; border-color: #385277;">
                                            <option disabled selected>Seleccione..</option>

                                            <% Medida?.forEach((medida) =>{ %>  
                                                <% id_medida= medida.IDMEDIDA %>
                                                <% nombre_medida= medida.NOMBREMEDIDA %>  
                                            <option value="<%= id_medida %>" style="color: #707070;"><%= nombre_medida%></option>
                                            <% }); %> 

                                        </select>
                                      
                                </div>

                                <!-- input modelo--> 
                                <div class="justify-content-start fs-5 " style="color: #385277;">
                                    Modelo
                                    <div class="opacity-75">
                                        <input required name="modeloRegistro" type="text" class=" form-control rounded-4 border-2" style="background-color: #99B3D8; color: black; border-color: #385277;">
                                    </div>
                                </div>

                                <!-- icono de agregar proveedores  
                                <div class="position-relative " style="right: 2rem; top: 2rem;">
                                    <a href="crearProveedor2"><img src="https://i.ibb.co/LYWsx61/mas.png" class="rounded-circle " style="height: 3rem; background-color: #99B3D8;"></a>
                                </div>-->

                            </div>

                                <!-- textarea donde estara todo el contenido observacion--> 
                            <div class="col-sm-12 col-md-6 col-lg-6 col-xl-6 p-6 ">
                                <div class="py-4" style="color: #385277; ">
                                    <div class="opacity-75">
                                        <div class="form-floating rounded-4 border-2">
                                            <textarea required name="observacionRegistro" style="font-size: small; background-color: #99B3D8; color: black; border-color: #385277; " class="form-control"  id="floatingTextarea"></textarea>
                                            <label for="floatingTextarea" style="color:  #385277;  ">Observación</label>
                                        </div>
                                         
                                    </div>
                                </div>
                            </div>

                            <!-- input de espaciado --> 
                            <div class="col-sm-12 col-md-5 col-lg-5 col-xl-5 ">     </div>
                            <div class="col-sm-6 col-md-1 col-lg-1 col-xl-1 pt-1"></div><!-- espaciado ocupando el sobrante de 1 columna total 12 --> 
                               
                            <!-- botones de guardar y cancelar, cancelar puede ser para borrar los datos de input-->     
                            <div class="col-6- col-md-3 col-lg-3 col-xl-3 pt-2  pt-2">
                                <button type="submit" class="btn rounded-5 border-3 form-control pt-4 pb-4" style="background-color: #81C79F; border-color: #707070;" >GUARDAR</button>

                            </div>
                            <div class="col-6-12 col-md-3 col-lg-3 col-xl-3 pt-2 "> 
                                    <button type="button" class="btn rounded-5 border-3 form-control pt-4 pb-4" style=" background-color: #D64C6D; color:white; border-color: #707070;" ><a href="home" ><FONT COLOR="black">CANCELAR </FONT></a></button>
                            </div> 
                        </div>
                    </div>
                </div>
            </div>

            
            <div class="col-sm-6 col-md-2 col-lg-2 col-xl-2  p-3 " >
                <div class="container-fluid">
                    <div class="justify-content-center fs-5 " style="color: #385277">
                        Precio  $
                        <!-- input de precios --> 
                        <div class="opacity-75"> 
                            <!-- input de precios publico--> 
                            <input required name="preciopublicoRegistro" type="number" step="any" placeholder="Publico" class=" form-control rounded-3 border-2" 
                            style="background-color: #A4B3C8; color: black; border-color: #00264b;" >
                                
                            <!-- input de precios mayor--> 
                            <input required name="precioalmayorRegistro" type="number" step="any" placeholder="Mayor"  class=" form-control rounded-3 border-2" 
                            style="background-color: #A4B3C8; color: black; border-color: #00264b; " >
                                
                            <!-- input de precios Frecuente--> 
                            <input required name="preciofrecuenteRegistro" type="number" step="any" placeholder="Frecuente"  class=" form-control rounded-3 border-2" 
                            style="background-color: #A4B3C8; color: black; border-color: #00264b;" >
                        </div> 
                    </div>
                </div>

                <div class="justify-content-start fs-5 mt-4 " style="color: #385277;">
                    Cantidad 
                    <!-- input de cantidad --> 
                    <div class="opacity-75">
                         
                    
            
                        <!-- input de cantidad maxima -->  
                        <input required name="cantidadMaximaRegistro" type="number" placeholder="Max"  class=" form-control rounded-4 border-2" 
                        style="background-color: #99B3D8; color: black; border-color: #00264b;" >
                    
            
                        <!-- input de cantidad minima -->  
                        <input required name="cantidadMinimaRegistro"  type="number" placeholder="Min" class=" form-control rounded-4 border-2" 
                        style="background-color: #99B3D8; color: black; border-color: #00264b;" >
                                                    
                    </div>
                </div>
            </div>

           <script>
            $(document).ready(function() {
                $('#miSelect').select2();
                $('#miSelect2').select2();
                $('#miSelect3').select2();
                $('#miSelect4').select2();
                $('#miSelect5').select2();


            });
           </script>
            </div>

            
        </div>
        
    </div>
</form>  
    <!-- SIMPLEMENTE ICONO PARA HOME -->  
    <footer class="p-3  z-3 " style="background-color:#385277 ; margin-top: auto;  ">
            <a href="/home">
            <label style="color: white;">HOME</label><img src="https://i.ibb.co/QF1WGmT/casa-1.png" style="height: 2rem; ">
            </a>
    </footer> 
    <!-- algunos scripts que seran necesarios para combo box  -->  
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"  crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js" integrity="sha384-fbbOQedDUMZZ5KreZpsbe1LCZPVmfTnH7ois6mU1QK+m14rQ1l2bGBq41eYeM/fS" crossorigin="anonymous"></script>
    <% } else { %>
        <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
          
        <% if (bienRegi) { %>
            <% if (typeof alert != "undefined") { %>
                <script>
                    Toastify({
                      text: '<%= alertMessage %>',
                      duration: <%= timer %> ? <%= timer %> : 1700,
                      close: true,
                      gravity: "top",
                      position: "center",
                      backgroundColor: "<%= alertIcon === 'success' ? '#51cacc' : '#e74c3c' %>",
                      callback: function() {
                        window.location.href = './<%= ruta %>';
                      }
                    }).showToast();
                  </script>
            <% }; %>
            <% } else { %>
                <% if (typeof alert != "undefined") { %>
                    <script>
                        Swal.fire({
                        title: '<%= alertTitle %>',
                        text:'<%= alertMessage %>',
                        icon: '<%= alertIcon %>',
                        showConfirmButton:<%= showConfirmButton %>,
                        timer:<%= timer %>
                        }).then(()=>{
                            window.history.go(-1)
                        })
                    </script>
                <% }; %>
                <% } %>   
        <% } %>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js" integrity="sha384-fbbOQedDUMZZ5KreZpsbe1LCZPVmfTnH7ois6mU1QK+m14rQ1l2bGBq41eYeM/fS" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"  crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js" integrity="sha384-fbbOQedDUMZZ5KreZpsbe1LCZPVmfTnH7ois6mU1QK+m14rQ1l2bGBq41eYeM/fS" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js" integrity="sha384-fbbOQedDUMZZ5KreZpsbe1LCZPVmfTnH7ois6mU1QK+m14rQ1l2bGBq41eYeM/fS" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
</body>
</html>

